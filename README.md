
# Filmstrip - Production Setup

### 1. Database (Supabase)
Run this SQL in your **SQL Editor** to create all tables (includes the fix for the 'config' column):

```sql
create table if not exists public.users (
  id uuid references auth.users not null primary key,
  email text, "firstName" text, "lastName" text, name text, username text unique,
  "avatarUrl" text, "favoriteGenres" text[], "favoriteMovieId" text,
  "createdAt" timestamp with time zone default timezone('utc'::text, now()) not null
);

create table if not exists public.entries (
  id bigint generated by default as identity primary key,
  "userId" uuid references auth.users not null, "movieId" text not null,
  status text check (status in ('WATCHED', 'WATCH_LATER', 'DROPPED')),
  rating int, "droppedReason" text, notes text, timestamp bigint
);

create table if not exists public.friendships (
  id bigint generated by default as identity primary key,
  "userId" uuid references auth.users not null,
  "friendId" uuid references auth.users not null,
  status text check (status in ('PENDING', 'ACCEPTED')),
  unique("userId", "friendId")
);

create table if not exists public.activity (
  id bigint generated by default as identity primary key,
  "userId" uuid references auth.users not null,
  type text, "movieId" text, metadata jsonb, timestamp bigint
);

create table if not exists public.challenges (
  id uuid default gen_random_uuid() primary key,
  "creatorId" uuid references auth.users not null,
  "recipientId" uuid references auth.users not null,
  "turnUserId" uuid references auth.users not null,
  type text, 
  size int, 
  status text, 
  "movieIds" text[], 
  results jsonb, 
  config jsonb, -- THE FIX: Column for game settings
  timestamp bigint
);

-- Disable RLS for MVP
alter table public.users disable row level security;
alter table public.entries disable row level security;
alter table public.friendships disable row level security;
alter table public.activity disable row level security;
alter table public.challenges disable row level security;
```

### 2. Refresh Cache
Settings > **Data API** > Scroll to bottom > **Reload Schema**.

### 3. Vercel Env Vars
- `VITE_SUPABASE_URL`
- `VITE_SUPABASE_ANON_KEY`
- `API_KEY` (Gemini)
